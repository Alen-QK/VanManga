(function(){"use strict";var e={6748:function(e,t,a){var s,n,o=a(2083),r=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},i=[],l={components:{}},c=l,d=a(1001),h=(0,d.Z)(c,r,i,!1,null,null,null),m=h.exports,u=a(3625),p=function(){var e=this,t=e._self._c;return t("el-container",{attrs:{id:"main"}},[t("el-header",{staticClass:"frame header"},[t("img",{attrs:{alt:"Vue logo",src:a(9109),id:"logo"}}),t("p",{attrs:{id:"logoText"}},[e._v("请问你想来点漫画吗？")])]),t("el-container",{staticClass:"mainPart"},[t("el-menu",{staticClass:"frame aside",attrs:{"default-active":this.$route.fullPath,collapse:e.isCollapse,router:!0,"background-color":"#1e1f26","text-color":"#fff","active-text-color":"#ffd04b"}},[t("el-menu-item",{attrs:{index:"/mainpage/searchpage"}},[t("i",{staticClass:"bi-search menuIcons"}),t("span",{attrs:{slot:"title"},slot:"title"},[e._v("搜索添加漫画")])]),t("el-menu-item",{attrs:{index:"/mainpage/mangaku"}},[t("i",{staticClass:"bi-tools menuIcons"}),t("span",{attrs:{slot:"title"},slot:"title"},[e._v("现有漫画")])])],1),t("el-main",{staticClass:"frame main"},[e.isRouterAlive?t("router-view",{on:{reload:e.reload}}):e._e()],1)],1),t("Announcement",{staticClass:"announcement"}),t("v-pull-button",{class:e.isCollapse?"mainPagePullButton hide":"mainPagePullButton",attrs:{isHide:e.isCollapse},on:{switchCollapse:e.handleCollapse}})],1)},g=[],f=function(){var e=this,t=e._self._c;return t("div",{class:e.isHide?"hide":"",attrs:{id:"pullButton"},on:{click:e.changeHide}},[e._m(0)])},b=[function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"pullButtonBackground"}},[t("i",{staticClass:"bi-arrow-bar-left"})])}],v={name:"V-pullButton",props:["isHide"],data(){return{}},methods:{changeHide(){this.$emit("switchCollapse")}}},_=v,y=(0,d.Z)(_,f,b,!1,null,"48006cba",null),w=y.exports,C=function(){var e=this,t=e._self._c;return t("div",{staticClass:"announceStage",on:{mouseover:e.showText,mouseout:e.hideText,click:e.handleClick}},[t("svg",{staticClass:"icon bi",attrs:{width:"30",height:"30",fill:e.color,id:"announceIcon"}},[t("use",{attrs:{"xlink:href":a(5437)+"#exclamation-circle"}})]),t("transition",{attrs:{name:"announceShow"}},[t("p",{directives:[{name:"show",rawName:"v-show",value:e.isHover,expression:"isHover"}],attrs:{id:"announceContent"}},[e._v("公告")])]),t("el-dialog",{attrs:{title:"VanIsLord-Manga 夜镇漫画 V1.0.1 公告",visible:e.isClicked,"append-to-body":!0,top:"5vh",width:"55%",center:""},on:{"update:visible":function(t){e.isClicked=t}}},[t("hr"),t("div",{staticClass:"text"},[t("span",[e._v("感谢你使用VanIsLord-Manga漫画系统")]),t("br"),t("br"),t("span",[e._v("本系统仅为漫画添加系统，对应源为漫画狗")]),t("br"),t("br"),t("span",[e._v("考虑到安全性等诸多方面的缘故，漫画抓取速度设置同时只能下载一部且每本2话并发下载，并设有一定的速度上限以防止被cloudflare发现")]),t("br"),t("br"),t("span",[e._v("如果登记多部，会排队下载。")]),t("br"),t("br"),t("span",[e._v("搜索结果对应在漫画狗中搜索结果的前10条，如果需要确认搜索结果是否为你想要的结果，你可以在漫画狗中核对。")]),t("br"),t("br"),t("span",[e._v("现有漫画中可以实时看到漫画的抓取情况，"),t("em",[e._v("当前库中最新话")]),e._v(" 代表现在抓取完成的最新一话，"),t("em",[e._v("初次抓取？")]),e._v(" 代表第一次抓取是否完成")]),t("br"),t("br"),t("br"),t("br"),t("span",[e._v("注意！由于并发下载的问题 "),t("em",[e._v("当前库中最新话")]),e._v(" 不代表最新话前的所有话都已下载完成，只是记录了下载的所有话中最新的一话。")]),t("br"),t("br"),t("br"),t("br"),t("span",[e._v("所有在漫画库的漫画会自动在每天扫描更新一次")]),t("br"),t("br"),t("br"),t("br"),t("span",[e._v("未来或许会提供更多源的选择，目前对抓取友善的汉化源仅有漫画狗，可能存在缺页。")]),t("br"),t("br"),t("br"),t("br"),t("span",[e._v("V1.0.1版本新增功能：")]),t("br"),t("br"),t("span",[e._v("1. 新增重新抓取功能，现在的漫画可以单独重新抓取其中的部分章节")]),t("br"),t("span",[e._v("2. 修复漫画索引功能，现在可以通过搜索栏查询漫画")]),t("br"),t("span",[e._v("3. 漫画库动态显示，新增的漫画或有新抓取的漫画，现在会显示在漫画库前列")]),t("br"),t("span",[e._v("4. 优化章节命名，减少章节在漫画分类中可能会出现的错误")]),t("br"),t("br"),t("br"),t("br"),t("span",[e._v("本系统的开发人员只有两位（Van/Alen Qi）,且完全从零开始的开发,我们已经尽量保证版本的稳定，但如果遇见任何bug，请立刻联系我")]),t("br"),t("br"),t("span",[e._v("但也请你不要破坏性的使用本系统，做出一些正常人不会做的操作")]),t("br"),t("br"),t("br"),t("br"),t("span",[e._v("最后，再次感谢你使用VanIsLord-Manga漫画系统")]),t("br"),t("br"),t("span",{staticStyle:{float:"right"}},[t("em",[e._v('--Tom "Van" Wang & Kun "Alen" Qi')])])]),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:function(t){e.isClicked=!1}}},[e._v("确 定")])],1)])],1)},k=[],$={name:"Announcement",data(){return{color:"#ded12f",isHover:!1,isClicked:!1}},methods:{showText(){this.isHover=!0},hideText(){this.isHover=!1},handleClick(){this.isClicked=!0}},watch:{isHover:{handler(e){if(e){const e=document.querySelector("body");e.style.overflow="hidden"}else{const e=document.querySelector("body");e.style.overflow="hidden"}}}}},x=$,S=(0,d.Z)(x,C,k,!1,null,"a1595e58",null),D=S.exports,P={name:"MainPage",data(){return{isRouterAlive:!0,isCollapse:!1}},provide(){return{reload:this.reload}},methods:{reload(){this.isRouterAlive=!1,this.$nextTick((function(){this.isRouterAlive=!0}))},handleCollapse(){this.isCollapse=!this.isCollapse}},components:{VPullButton:w,Announcement:D},sockets:{scan_completed(){this.$notify({title:"全盘扫描完成",message:"已完成全盘扫描，建议检查后台以确定是否有无法扫描的漫画！",type:"warning",position:"bottom-right"})}},created(){this.$socket.open(),console.log("链接启动！")}},T=P,B=(0,d.Z)(T,p,g,!1,null,"3dfe03bc",null),V=B.exports,M=function(){var e=this,t=e._self._c;return t("div",{staticClass:"searchStage"},[t("div",{staticClass:"searchArea"},[t("div",{staticClass:"globalSearch"},[t("el-input",{staticClass:"searchBox",attrs:{size:"mini",id:"searchBoxID","prefix-icon":"el-icon-search",placeholder:"在本页面搜索相关文件"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.sendOut.apply(null,arguments)}},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),t("transition",{attrs:{name:"password-error"}},[t("el-alert",{directives:[{name:"show",rawName:"v-show",value:e.emptyError,expression:"emptyError"}],staticClass:"errorMsgs",attrs:{title:"搜索内容不能为空！",type:"error","show-icon":"",closable:!1,id:"emptyErrorMessage"}})],1)],1),t("Vbotton",{staticClass:"searchButton",attrs:{nameForButton:"搜索",clickMethod:e.sendOut,isIcon:!0,iconClass:"bi-search"}}),t("Vbotton",{staticClass:"searchButton",attrs:{nameForButton:"扫描",clickMethod:e.sendOutScan,isIcon:!0,iconClass:"bi-box-seam-fill"}})],1),t("overlay-scrollbars",{staticClass:"listArea",attrs:{options:e.defaultStyle}},[e.isSearch?t("DocumentList",{staticClass:"cardPage",attrs:{searchList:e.searchList},on:{reload:e.reloadPass}}):e._e()],1)],1)},N=[],O=(a(7658),{name:"checkAndPOP",methods:{errorDealing(e,t,a){if(document.getElementById(a)){let e=document.getElementById(a);this.shakingAnime(e)}let s=document.getElementById(t);s.style.backgroundColor="#fbc4c4"},recover(e,t){let a=document.getElementById(t);a.style.backgroundColor="transparent"},shakingAnime(e){e.animate([{transform:"translateX(0)"},{transform:"translateX(-3%)"},{transform:"translateX(0%)"},{transform:"translateX(3%)"},{transform:"translateX(0%)"},{transform:"translateX(-3%)"},{transform:"translateX(0%)"},{transform:"translateX(3%)"},{transform:"translateX(0%)"},{transform:"translateX(-3%)"},{transform:"translateX(0%)"},{transform:"translateX(3%)"},{transform:"translateX(0%)"},{transform:"translateX(-3%)"},{transform:"translateX(0%)"},{transform:"translateX(3%)"},{transform:"translateX(0%)"},{transform:"translateX(-3%)"},{transform:"translateX(0%)"},{transform:"translateX(3%)"},{transform:"translateX(0%)"}],{duration:300})}}}),E=O,L=(0,d.Z)(E,s,n,!1,null,"5435f0fc",null),I=L.exports,A=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"ccc"}},[t("ul",{staticClass:"document"},e._l(e.searchList,(function(a){return t("li",{key:a.manga_id},[t("keep-alive",[t("Document",{attrs:{item:a},on:{reload:e.reload}})],1)],1)})),0),e.isNoContent?t("div",{staticClass:"nothing"},[e._m(0)]):e._e()])},R=[function(){var e=this,t=e._self._c;return t("p",[e._v("搜索无结果！"),t("br"),e._v("Nothing Here!")])}],X=function(){var e=this,t=e._self._c;return t("div",{staticClass:"stage"},[t("div",{staticClass:"documentBlock",on:{click:e.handleClick}},[t("img",{staticStyle:{width:"240px",height:"320px","object-fit":"contain"},attrs:{draggable:"false",id:"s"+e.item.manga_id,src:e.imgSrc}}),t("p",{staticClass:"showName"},[e._v(e._s(e.item.manga_name))]),t("p",{staticClass:"showName"},[e._v(e._s(e.item.artist_name))]),t("p",{staticClass:"showName"},[e._v("最新话名 ："+e._s(e.item.newest_epi))])])])},H=[],Z={name:"Document",props:["item"],data(){return{imgSrc:""}},created(){this.imgSrc="data:image/png;base64,"+this.item.thumbnail},mounted(){},methods:{commonCheck(e){return 200===e.code?(this.$notify({title:`${this.item.manga_name} 已入库`,message:`成功选择 ${this.item.manga_name}。 ID为 ${this.item.manga_id}。已开始在后台下载！`,type:"success",position:"bottom-right"}),this.$emit("reload"),!0):410===e.code?(this.$notify({title:`${this.item.manga_name} 已存在在库中`,message:"请仔细检查后再添加！",type:"error",position:"bottom-right"}),!0):411!==e.code&&void 0},handleClick(){let e,t=`<p>漫画ID为 ： <strong>${this.item.manga_id}</strong></p><p>漫画作者为 ： <strong>${this.item.artist_name}</strong></p><p>该漫画最新话名为 ： <strong>${this.item.newest_epi}</strong></p><p>请检查上方信息是否正确，最好在漫画狗网站内核实一下</p><p><strong>并且添加的并非库中已有的漫画！</strong></p>`;this.$confirm(t,`你选择的是 ${this.item.manga_name}`,{dangerouslyUseHTMLString:!0,confirmButtonText:"确定",cancelButtonText:"取消"}).then((()=>{e=this.$loading({lock:!0,text:"正在提交下载请求，等待响应...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),this.$http.post("dogemanga/confirm",{manga_object:this.item,submit_sign:"0"}).then((t=>{let a=t.data;e.close();let s=this.commonCheck(a);if(!s){let e=`<p>你选择的漫画名为 ： <strong>${this.item.manga_name}</strong></p><p>库中可能重复的漫画 ：</p><strong>${a.data}</strong><p>请再次核实并确认是否添加该漫画</p><p><strong>请勿添加库中已有的漫画！</strong></p>`;this.$confirm(e,"我们查了你的户籍，发现有可能的重复！",{dangerouslyUseHTMLString:!0,confirmButtonText:"仍要添加",cancelButtonText:"遗憾离场"}).then((()=>{const e=this.$loading({lock:!0,text:"正在提交下载请求，等待响应...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});this.$http.post("dogemanga/confirm",{manga_object:this.item,submit_sign:"1"}).then((t=>{let a=t.data;e.close(),this.commonCheck(a)}))}))}}))})).catch((t=>{e.close(),this.isSearch=!1,"/"!==this.$route.fullPath&&this.$router.replace("/"),this.$message.error("漫画搜索出现未知问题，请联系Van！ Code:"+t.message)}))},reload(){this.$emit("reload")},changeHeight(e){let t=e.target,a=t.parentNode;435!==t.clientHeight&&(t.style.gridTemplateRows="1fr 1fr 1fr 1fr",a.style.transition="all 0s"),a.style.height=t.clientHeight+"px"},recover(e){let t=e.target,a=t.parentNode;a.style.height="100%",t.style.gridTemplateRows="1fr 1fr",a.style.transition="all 0.3s ease-in-out"}}},F=Z,j=(0,d.Z)(F,X,H,!1,null,"8ae27676",null),G=j.exports,q={name:"DocumentList",props:["searchList"],data(){return{isNoContent:!1}},components:{Document:G},methods:{reload(){this.$emit("reload")}}},U=q,W=(0,d.Z)(U,A,R,!1,null,"70609c1d",null),z=W.exports,K=function(){var e=this,t=e._self._c;return t("div",{staticClass:"button-container",attrs:{id:"button-container"}},[t("button",{class:e.vStyle,attrs:{id:"upload"},on:{click:e.handleClick}},[e.isIcon?t("i",{class:e.iconClass}):e._e(),e._v(" "+e._s(e.nameForButton)+" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.beGreen,expression:"beGreen"}],staticClass:"bottomSide"}),t("div",{directives:[{name:"show",rawName:"v-show",value:!e.beGreen,expression:"!beGreen"}],staticClass:"bottomSide working"})])])},J=[],Q={name:"V-botton",props:["nameForButton","clickMethod","isWorking","isIcon","iconClass","vStyle"],data(){return{beGreen:!0}},methods:{handleClick(){return this.clickMethod()}},watch:{isWorking:{handler(e){this.beGreen=e}}}},Y=Q,ee=(0,d.Z)(Y,K,J,!1,null,"5948ac98",null),te=ee.exports,ae={name:"SearchPage",mixins:[I],data(){return{search:"",searchList:[],emptyError:!1,isSearch:!1,defaultStyle:{className:"os-theme-thick-light",overflowBehavior:{x:"hidden"},scrollbars:{autoHide:"leave"}}}},methods:{reloadPass(){this.$emit("reload")},sendOutScan(){this.$prompt("请输入暗码","仅van可以操作",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/WWww7878/,inputErrorMessage:"你不是van，van永远都在看着你，爪巴！"}).then((()=>{const e=this.$loading({lock:!0,text:"正在加载中...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});this.$http.get("dogemanga/rezip").then((t=>{let a=t.data;200===a.code&&(this.$notify({title:"全盘扫描开始",message:"正在全盘扫描检查并打包所有漫画文件，请稍后",type:"success",position:"bottom-right"}),e.close())})).catch((t=>{e.close(),this.isSearch=!1,"/"!==this.$route.fullPath&&this.$router.replace("/"),this.$message.error("全盘扫描打包出现未知问题，请联系Van！ Code:"+t.message)}))})).catch((()=>{}))},sendOut(e){if(null===this.search||""===this.search)this.emptyError=!0,this.errorDealing(e,"searchBoxID","emptyErrorMessage");else{const t=this.$loading({lock:!0,text:"正在加载中...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});this.emptyError=!1,this.recover(e,"searchBoxID","emptyErrorMessage"),this.isSearch=!1,this.searchList=[],this.$http.get("dogemanga/search",{params:{manga_name:this.search}}).then((a=>{let s=a.data;if(200===s.code){for(let e of s.data)this.searchList.push(e);this.isSearch=!0,t.close()}else 456===s.code?(t.close(),this.isSearch=!1,this.emptyError=!0,this.errorDealing(e,"searchBoxID","emptyErrorMessage"),console.log("试图绕过前端检查被发现了 杂种")):457===s.code&&(t.close(),this.$notify({title:"搜索出现问题",message:`${this.search} 无法在对应网站源搜索到结果`,type:"error",position:"bottom-right"}),console.log("试图绕过前端检查被发现了 杂种"))})).catch((e=>{t.close(),this.isSearch=!1,"/"!==this.$route.fullPath&&this.$router.replace("/"),this.$message.error("漫画搜索出现未知问题，请联系Van！ Code:"+e.message)}))}}},components:{DocumentList:z,Vbotton:te}},se=ae,ne=(0,d.Z)(se,M,N,!1,null,"724dbf19",null),oe=ne.exports,re=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"uploadTable"}},[t("el-table",{staticClass:"grandTable",attrs:{data:e.tableData.filter((t=>!e.search||t.manga_name.toLowerCase().includes(e.search.toLowerCase()))).sort(((e,t)=>t.add_date-e.add_date)),height:"100%",stripe:!0,"row-style":{background:"transparent",color:"white"},"empty-text":"暂时还没有漫画哦"}},[t("el-table-column",{attrs:{label:"封面",prop:"manga_name",width:"200"},scopedSlots:e._u([{key:"default",fn:function(e){return[t("img",{staticStyle:{width:"100px",height:"133px","object-fit":"contain"},attrs:{id:"s"+e.row.manga_id,src:"data:image/png;base64,"+e.row.thumbnail}})]}}])}),t("el-table-column",{attrs:{label:"漫画名",prop:"manga_name",width:"240"}}),t("el-table-column",{attrs:{label:"漫画ID",prop:"manga_id",width:"90"}}),t("el-table-column",{attrs:{label:"作者",prop:"artist_name",width:"110"}}),t("el-table-column",{attrs:{label:"当前库中最新话名称",prop:"last_epi_name",width:"240"}}),t("el-table-column",{attrs:{label:"现在状态",prop:"completed",width:"90"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(!0===a.row.completed?"已完成":1===a.row.completed?"正在抓取...":"排队中..."))])]}}])}),t("el-table-column",{attrs:{align:"right"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"danger"},on:{click:function(t){return e.openReload(a.row)}}},[e._v("设置重新抓取")])]}},{key:"header",fn:function(a){return[t("el-input",{staticStyle:{width:"200px"},attrs:{size:"mini","prefix-icon":"el-icon-search",placeholder:"输入关键字搜索"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})]}}])})],1),t("MangaReloadForm",{attrs:{newVisible:e.newVisible,manga_id:e.selectedMangaId,manga_name:e.selectedMangaName},on:{reload:e.reloadPass,closeNewDir:e.closeNewDir}})],1)},ie=[],le=function(){var e=this,t=e._self._c;return e.newVisibleShell?t("el-dialog",{attrs:{title:`请选择 《${e.manga_name}》 中需要重新下载的章节`,visible:e.newVisibleShell,"append-to-body":!0,width:"75%",center:!0,top:"7vh","custom-class":"mainDialog",id:"mainDialog"},on:{"update:visible":function(t){e.newVisibleShell=t},close:e.close}},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"chapterTable",staticClass:"chapterTable",attrs:{id:"chapterTable","element-loading-text":"Van正在出你的户籍中，请稍后...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)",data:e.chapterData.filter((t=>!e.search||t.chapter_title.toLowerCase().includes(e.search.toLowerCase()))),height:"70vh",stripe:!0,"row-style":{background:"transparent",color:"white"},"empty-text":"该漫画无任何章节，需要联系Van以寻求帮助"},on:{"select-all":e.handleSelectionChange,select:e.handleSelectionChange}},[t("el-table-column",{attrs:{type:"selection",width:"55"}}),t("el-table-column",{attrs:{label:"章节名称",prop:"chapter_title",width:"200"}}),t("el-table-column",{attrs:{align:"right"},scopedSlots:e._u([{key:"header",fn:function(a){return[t("el-input",{staticStyle:{width:"200px"},attrs:{size:"mini","prefix-icon":"el-icon-search",placeholder:"输入关键字搜索"},on:{change:e.debugF},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})]}}],null,!1,4022887283)})],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:e.toggleClearSelection}},[e._v("清除选择")]),t("el-button",{attrs:{type:"primary"},on:{click:e.openConfirm}},[e._v("确认重新下载")])],1)],1):e._e()},ce=[],de={name:"MangaReloadForm",props:["newVisible","manga_name","manga_id"],data(){return{search:"",loading:!0,newVisibleShell:!1,chapterData:[],multipleSelection:[]}},methods:{debugF(){console.log(this.search)},close(){this.$emit("closeNewDir"),this.isNeedReload&&(this.isNeedReload=!1,this.$emit("reload"))},toggleClearSelection(){this.$refs.chapterTable.clearSelection()},handleSelectionChange(e){this.multipleSelection=e,console.log(this.multipleSelection)},openConfirm(){if(this.multipleSelection.length>0){const e=this.$createElement;let t=this.multipleSelection.map((e=>e.chapter_title)),a=[];for(let s of t)a.push(e("div",null,s));this.$msgbox({title:"你确定吗？",message:e("div",{class:"confirmPage"},[e("div",null,"需要重新下载的章节有"),e("div",{style:"width: 100%; display: flex; flex-direction: column; align-items: center; max-height : 70vh; overflow : auto",id:"confirmList"},[...a]),e("div",null,[e("strong",null,"请仔细确认！任务会被安排进入下载队列且无法退回")])]),showCancelButton:!0,confirmButtonText:"确定",cancelButtonText:"取消"}).then((()=>{this.submitReload(),this.$emit("closeNewDir"),this.$emit("reload")})).catch((()=>{}))}else this.$notify({title:"你是不是瞎子？？",message:"你未选中任何章节，无法提交重新下载请求",type:"error",position:"bottom-right"})},submitReload(){const e=this.$loading({lock:!0,text:"正在提交重下载请求，等待响应...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});console.log(JSON.stringify(this.multipleSelection)),this.$http.post("dogemanga/redownload",{manga_id:this.manga_id,selected_array:JSON.stringify(this.multipleSelection)}).then((t=>{let a=t.data;200===a.code&&(this.$notify({title:`${this.manga_name} 重新下载任务已提交！`,message:`${this.manga_name} 中所选章节开始重新下载`,type:"success",position:"bottom-right"}),e.close(),this.$emit("closeNewDir"),this.$emit("reload"))})).catch((t=>{e.close(),"/"!==this.$route.fullPath&&this.$router.replace("/"),this.$message.error("章节加载出现未知问题，请联系Van！ Code:"+t.message)}))}},async mounted(){},watch:{newVisible:{handler(e){this.newVisibleShell=e,e&&(this.chapterData=[],this.$http.get("dogemanga/confirmmanga",{params:{manga_id:this.manga_id}}).then((e=>{let t=e.data;if(200===t.code){for(let e of t.data)this.chapterData.push(e);this.chapterData.sort((function(e,t){return t.chapter_title-e.chapter_title})),this.loading=!1,OverlayScrollbars(document.querySelectorAll("#chapterTable .el-table__body-wrapper"),{className:"os-theme-thick-light",scrollbars:{autoHide:"none"}})}})).catch((e=>{this.loading=!1,"/"!==this.$route.fullPath&&this.$router.replace("/"),this.$message.error("章节加载出现未知问题，请联系Van！ Code:"+e.message)})))}}}},he=de,me=(0,d.Z)(he,le,ce,!1,null,"6f5a175c",null),ue=me.exports,pe={name:"MangaKu",components:{MangaReloadForm:ue},data(){return{search:"",tableData:[],newVisible:!1,selectedMangaId:null,selectedMangaName:null}},methods:{reloadPass(){this.$emit("reload")},openReload(e){this.selectedMangaId=e.manga_id,this.selectedMangaName=e.manga_name,this.newVisible=!0},closeNewDir(){this.searchFlag=!1,this.editData=null,this.newVisible=!1}},async mounted(){const e=this.$loading({lock:!0,text:"正在加载中...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});OverlayScrollbars(document.querySelectorAll("#uploadTable .el-table__body-wrapper"),{className:"os-theme-thick-light",scrollbars:{autoHide:"none"}}),this.tableData=[],await this.$http.post("dogemanga/lib").then((t=>{let a=t.data;if(200===a.code){for(let e of a.data)this.tableData.push(e);this.tableData.sort((function(e,t){return t.add_date-e.add_date})),e.close()}})).catch((t=>{e.close(),this.isSearch=!1,"/"!==this.$route.fullPath&&this.$router.replace("/"),this.$message.error("漫画库加载出现未知问题，请联系Van！ Code:"+t.message)})),await this.$http.get("dogemanga/cdl").then((e=>{let t=e.data;if(200===t.code){let e=t.data;for(let t of this.tableData)t.manga_id===e&&(t.completed=1)}})).catch((t=>{e.close(),this.isSearch=!1,"/"!==this.$route.fullPath&&this.$router.replace("/"),this.$message.error("漫画库下载加载出现未知问题，请联系Van！ Code:"+t.message)}))},sockets:{response(e){let t=e.manga_id;for(let a of this.tableData)if(a.manga_id===t){a.last_epi_name=e.newest_epi_name,a.last_epi=e.newest_epi;break}},complete_info(e){let t=e.manga_id;for(let a of this.tableData)if(a.manga_id===t){a.completed=!0,this.$notify({title:`${a.manga_name} 完成所有下载！`,message:`${a.manga_name} 已经完成所有现有下载任务！等待后续循环更新`,type:"success",position:"bottom-right"});break}},downloading_info(e){let t=e;for(let a of this.tableData)if(a.manga_id===t){a.completed=1,a.add_date=Date.now()/1e3,this.$notify({title:`${a.manga_name} 开始抓取下载！`,message:`${a.manga_name} 开始初次抓取！`,type:"success",position:"bottom-right"});break}}},create(){}},ge=pe,fe=(0,d.Z)(ge,re,ie,!1,null,"148fba37",null),be=fe.exports,ve=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"errpageStage"}},[t("p",{staticClass:"back",on:{click:e.backToMainPage}},[e._v("点击我返回现实")]),e._m(0)])},_e=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"error"},[t("div",{staticClass:"wrap"},[t("div",{staticClass:"404"},[t("pre",[t("code",[e._v("\r\n        "),e._v("\r\n\t  "),t("span",{staticClass:"green"},[e._v("<!")]),t("span",[e._v("DOCTYPE html")]),t("span",{staticClass:"green"},[e._v(">")]),e._v("\r\n      "),t("span",{staticClass:"orange"},[e._v("<html>")]),e._v("\r\n        "),t("span",{staticClass:"orange"},[e._v("<style>")]),e._v("\r\n                * {\r\n\t\t        "),t("span",{staticClass:"green"},[e._v("我")]),e._v(":"),t("span",{staticClass:"blue"},[e._v("究竟是谁")]),e._v(";\r\n            }\r\n        "),t("span",{staticClass:"orange"},[e._v("</style>")]),e._v("\r\n        "),t("span",{staticClass:"orange"},[e._v("<body>")]),e._v("\r\n            VANISLORD.EXE出现错误...\r\n\r\n              ERROR 404!\r\n\t\t\t\t          FILE NOT FOUND!\r\n\r\n\r\n\r\n\t\t\t\t"),t("span",{staticClass:"comment"},[e._v("\x3c!--迷失在现实的泥潭中--\x3e")]),e._v("\r\n        "),t("span",{staticClass:"orange"}),e._v("\r\n      "),t("div",[e._v("\r\n      "),t("br"),e._v("\r\n      "),t("span",{staticClass:"info"},[e._v("\r\n      "),t("br"),e._v("\r\n\r\n\r\n\r\n\r\n        "),t("span",{staticClass:"orange"},[e._v(" </body>")]),e._v("\r\n        "),t("br"),e._v("\r\n      "),t("span",{staticClass:"orange"},[e._v("</html>")]),e._v("\r\n\r\n        ")]),e._v("\r\n        ")]),e._v("\r\n        ")])])])])])}],ye={name:"ErrorPage",methods:{backToMainPage(){this.$router.replace("/mainpage/searchpage/")}},created(){const e=document.querySelector("body");e.style.overflow="hidden"},beforeDestroy(){const e=document.querySelector("body");e.style.overflow="visible"}},we=ye,Ce=(0,d.Z)(we,ve,_e,!1,null,"7c9bdcdc",null),ke=Ce.exports;o["default"].use(u.ZP);const $e=[{path:"/mainpage",name:"MainPage",component:V,children:[{path:"searchpage",component:oe},{path:"mangaku",component:be}]},{path:"*",name:"Error",component:ke,meta:{isLogin:!1}}],xe=new u.ZP({mode:"history",base:"/",routes:$e});xe.beforeEach(((e,t,a)=>{"/"===e.path||"/mainpage"===e.path?a("/mainpage/searchpage"):a()}));var Se=xe,De=a(5173);o["default"].use(De.ZP);var Pe=new De.ZP.Store({state:{},getters:{},mutations:{},actions:{},modules:{}}),Te=a(7422),Be=a(1960),Ve=a.n(Be),Me=a(9952),Ne=a(7825),Oe=a.n(Ne),Ee=a(961);let Le=window.MANGA_BASE_URL,Ie=window.MANGA_BASE_WEBSOCKET_URL;console.log(Le),console.log(Ie),o["default"].use(new(Oe())({debug:!0,connection:(0,Ee.ZP)(Ie),extraHeaders:{"Access-Control-Allow-Origin":"*"},options:{autoConnect:!1}})),o["default"].config.productionTip=!1,o["default"].use(Ve()),Te.Z.defaults.baseURL="/api",o["default"].prototype.$http=Te.Z,o["default"].prototype.$addr=Le,o["default"].use(Me.m),new o["default"]({sockets:{connecting(){console.log("正在连接")},disconnect(){console.log("断开链接")},connect_failed(){console.log("连接失败")},connect(){console.log("链接成功",this.$socket.id)},reconnect(){console.log("重新链接")}},router:Se,store:Pe,render:e=>e(m)}).$mount("#app")},9109:function(e,t,a){e.exports=a.p+"img/naiveLogo.7c53ae3b.png"}},t={};function a(s){var n=t[s];if(void 0!==n)return n.exports;var o=t[s]={id:s,loaded:!1,exports:{}};return e[s].call(o.exports,o,o.exports,a),o.loaded=!0,o.exports}a.m=e,function(){a.amdO={}}(),function(){var e=[];a.O=function(t,s,n,o){if(!s){var r=1/0;for(d=0;d<e.length;d++){s=e[d][0],n=e[d][1],o=e[d][2];for(var i=!0,l=0;l<s.length;l++)(!1&o||r>=o)&&Object.keys(a.O).every((function(e){return a.O[e](s[l])}))?s.splice(l--,1):(i=!1,o<r&&(r=o));if(i){e.splice(d--,1);var c=n();void 0!==c&&(t=c)}}return t}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[s,n,o]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){a.p="/"}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,s){var n,o,r=s[0],i=s[1],l=s[2],c=0;if(r.some((function(t){return 0!==e[t]}))){for(n in i)a.o(i,n)&&(a.m[n]=i[n]);if(l)var d=l(a)}for(t&&t(s);c<r.length;c++)o=r[c],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return a.O(d)},s=self["webpackChunkvanmanga"]=self["webpackChunkvanmanga"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=a.O(void 0,[998],(function(){return a(6748)}));s=a.O(s)})();
//# sourceMappingURL=app.1691911919126.js.map